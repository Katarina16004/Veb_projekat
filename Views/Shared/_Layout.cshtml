<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>@ViewBag.Title - Tourist Agency</title>
</head>
<body>
    @{
        var currentUser = Session["CurrentUser"] as Veb_Projekat.Models.SessionUser;
    }

    <nav>
        @Html.ActionLink("Home", "Index", "Home")

        @if (currentUser != null && currentUser.IsLoggedIn)
        {
            @: | Welcome, <strong>@currentUser.FirstName</strong> (@currentUser.UserRole)

            if (currentUser.IsTourist)
            {
                @: | @Html.ActionLink("My Reservations", "MyReservations", "Tourist")
            }
            else if (currentUser.IsManager)
            {
                @: | @Html.ActionLink("Arrangements", "ViewAllArrangements", "Manager")
                @: | @Html.ActionLink("Accommodations", "ViewAllAccommodations", "Manager")
                @: | @Html.ActionLink("Accommodation Units", "ViewAllUnits", "Manager")
                @: | @Html.ActionLink("Reservations", "ViewAllReservations", "Manager")
                //@: | @Html.ActionLink("Create Arrangement", "CreateArrangement", "Manager")
                @: | @Html.ActionLink("Comments", "ApproveComments", "Manager")
            }
            else if (currentUser.IsAdmin)
            {
                @: | @Html.ActionLink("Users", "ViewAllUsers", "Admin")
                @: | @Html.ActionLink("Create Manager", "RegisterManager", "Admin")
            }

            @: | @Html.ActionLink("Profile", "EditProfile", "Account")
            @: | @Html.ActionLink("Logout", "Logout", "Account")
        }
        else
        {
            @: | @Html.ActionLink("Login", "Login", "Account")
            @: | @Html.ActionLink("Register", "Register", "Account")
        }
    </nav>

    @if (TempData["Success"] != null)
    {
        <div style="background:#d4edda; color:#155724; padding:10px; margin:10px 0;">
            @TempData["Success"]
        </div>
    }
    @if (TempData["Error"] != null)
    {
        <div style="background:#f8d7da; color:#721c24; padding:10px; margin:10px 0;">
            @TempData["Error"]
        </div>
    }

    @RenderBody()

    @RenderSection("scripts", required: false)
</body>
</html>